<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2010 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php if (!($_shippingRateGroups = $this->getShippingRates())): ?>
    <p><?php echo $this->__('Please, fill in the address section including state and zipcode to see the shipping qotes.') ?></p>
<?php else: ?>
    <?php $i=0;?>
    <dl class="sp-methods">
        <?php $_sole = count($_shippingRateGroups) == 1; foreach ($_shippingRateGroups as $code => $_rates): ?>
            <?php $i++;?>
            <dt><?php echo $this->getCarrierName($code) ?></dt>
            <dd>
                <ul>
                    <?php $j=0;?>
                    <?php $_sole = $_sole && count($_rates) == 1; foreach ($_rates as $_rate): ?>
                    <?php $j++;?>
                    <li>
                        <?php if ($_rate->getErrorMessage()): ?>
                            <ul class="messages"><li class="error-msg"><ul><li><?php echo $_rate->getErrorMessage() ?></li></ul></li></ul>
                        <?php else: ?>
                            <?php if ($_sole) : ?>
                                <span class="no-display"><input class="validate-one-required-by-name" name="shipping_method" type="radio" value="<?php echo $_rate->getCode() ?>" id="s_method_<?php echo $_rate->getCode() ?>" checked="checked" onclick="save_shipping_method(shipping_method_url, update_shipping_payment, update_shipping_review);" /></span>
                            <?php else: ?>
                                <?php if($i!=count($_shippingRateGroups) ||$j!=count($_rates)):?>
                                    <style type="text/css">
                                        #advice-validate-one-required-by-name-s_method_<?php echo$_rate->getCode()?>{
                                            display: none !important;
                                        }
                                    </style>
                                <?php endif;?>                                   
                                <input name="shipping_method" type="radio" value="<?php echo $_rate->getCode() ?>" id="s_method_<?php echo $_rate->getCode() ?>"<?php if($_rate->getCode() == 'smashingmagazine_mycarrier_liftgate') echo ' checked="checked"' ?> class="radio validate-one-required-by-name" onclick="save_shipping_method(shipping_method_url, update_shipping_payment, update_shipping_review);" />
                            <?php endif; ?>
                            <label for="s_method_<?php echo $_rate->getCode() ?>"><?php echo $_rate->getMethodTitle() ?>
                            <?php $_excl = $this->getShippingPrice($_rate->getPrice(), $this->helper('tax')->displayShippingPriceIncludingTax()); ?>
                            <?php $_incl = $this->getShippingPrice($_rate->getPrice(), true); ?>
                            <?php echo $_excl; ?>
                            <?php if ($this->helper('tax')->displayShippingBothPrices() && $_incl != $_excl): ?>
                                (<?php echo $this->__('Incl. Tax'); ?> <?php echo $_incl; ?>)
                            <?php endif; ?>
                            </label>
							<span style="right: 10px;position: absolute;z-index:99999">
							  <div class="s-method-tip" <?php if($j == 1 &&  $_rate->getCode() == 'smashingmagazine_mycarrier_customups') echo 'style="display:none;"'; ?>><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span>
							  <div class="s-tooltip"><?php 
							  if($j == 1) 
								echo 'No additional service: You agree that your address is a commercial address and you either have a loading dock or forklift or youâ€™ll be able to unload the equipment from truck yourself.';	
							  else if($j == 2) 
								echo 'Liftgate: Liftgated truck deliveries are required when you can not unload the equipment from a truck yourself. Liftgated truck will deliver the equipment curbside to your business and driver is only responsible for curbside delivery. Freight companies do not offer inside delivery.';	
							  else if($j == 3) 
								echo 'Residential: If your address is a residential address that includes if you operate your business from a residential address, this charge needs to be added to your total because freight companies do charge us when they go to residential areas for delivery.';
							  else if($j == 4) 
								echo 'Residential + Liftgate: If your address is residential and you need liftgate assistance, choose this option.';
							  ?></div>
  </div></span>

                       <?php endif ?>
                    </li>
                <?php endforeach; ?>
                </ul>
            </dd>
        <?php endforeach; ?>
    </dl>
<?php endif; ?>
